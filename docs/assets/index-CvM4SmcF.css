:root{--c-bg: #f8f9fa;--c-surface: #ffffff;--c-text: #212529;--c-text-muted: #6c757d;--c-border: #dee2e6;--c-gridline: #e9ecef;--c-danger: #dc3545;--c-warning: #ffc107;--space-1: .25em;--space-2: .5em;--space-3: .75em;--space-4: 1em;--space-5: 1.25em;--app-padding: var(--space-2);--note-size: 1.75em;--note-margin: var(--space-1);--border-radius-sm: 4px;--border-radius-md: 8px;--box-shadow-sm: 0 1px 2px rgba(0, 0, 0, .05);--box-shadow-md: 0 4px 6px rgba(0, 0, 0, .1);--main-font: "Atkinson Hyperlegible", Arial, sans-serif;--font-size-sm: .875rem;--font-size-base: 1rem;--font-size-lg: 1.125rem}@font-face{font-family:Atkinson Hyperlegible;src:url(../fonts/AtkinsonHyperlegibleNext-Regular.otf) format("opentype");font-weight:400;font-style:normal}*,*:before,*:after{box-sizing:border-box}html,body{margin:0;padding:0;height:100%;width:100%;overflow-x:hidden;overflow-y:hidden;font-family:var(--main-font);background-color:var(--c-gridline);color:var(--c-text);display:flex}button{background-color:var(--c-accent);color:var(--c-surface);border:none;border-radius:var(--border-radius-md);padding:8px 12px;font-family:var(--main-font);font-size:14px;cursor:pointer;transition:background-color .2s,opacity .2s}button:hover,button:focus{background-color:var(--c-accent);outline:none}button:disabled{background-color:var(--c-border);opacity:.7;cursor:not-allowed}*{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}*::selection{background:transparent}*::-moz-selection{background:transparent}:root{font-size:125%}body{font-size:var(--font-size-base)}button{font-size:var(--font-size-sm)}.slider-label{font-size:var(--font-size-base)}.tempo-input{font-size:var(--font-size-sm)}.app-title{font-size:var(--font-size-base)}.time-signature-label,.rhythm-ui-button{font-size:var(--font-size-sm)}.tonic-sign-button{font-size:var(--font-size-lg)}#app-container{display:flex;flex-direction:column;flex:1;min-height:0;width:100vw;overflow-x:visible}#canvas-container{height:80vh;display:flex;flex-direction:column;min-height:0;width:fit-content;min-width:100%;overflow-x:visible;padding:0rem .2rem;position:relative;z-index:1}#canvas-content{display:flex;flex-direction:row;flex:1;min-width:fit-content;overflow-x:visible;min-height:0}#toolbar{height:20vh;min-height:170px;width:fit-content;display:flex;gap:0rem;padding:.2em .2em 0;border:none;background-color:transparent;box-shadow:none;flex-shrink:0;margin-bottom:0;position:relative;z-index:2}#toolbar-container-1,#toolbar-container-2{display:flex;border:1px solid var(--c-border);border-radius:var(--border-radius-md);background-color:var(--c-bg)}#toolbar-container-1{padding:.1em;flex:0 0 auto;gap:.2rem;align-items:stretch;height:100%;overflow:visible}#toolbar-container-2{height:100%;overflow:hidden}.tool-subcontainer{display:flex;flex-direction:column;gap:.5rem;align-items:center;padding:0rem;background-color:transparent;border-radius:0;border-right:1px solid var(--c-border);height:100%;justify-content:center;overflow:visible;min-height:0}.tool-subcontainer:last-child,.control-section:last-child{border-right:none}.tab-sidebar{flex:0 0 fit-content;display:flex;flex-direction:column;background-color:var(--c-gridline);border-right:1px solid var(--c-border)}.tab-content{flex:1;padding:.1em;background-color:var(--c-bg);overflow:auto;min-width:0;height:100%}.tab-content:has(.dropdown-container.open){overflow:visible}.tab-content.dropdown-open{overflow:visible}#toolbar-container-2:has(.dropdown-container.open){overflow:visible}#toolbar-container-2.dropdown-open{overflow:visible}.tab-panel{display:none;height:100%;align-items:stretch}.tab-panel.active{display:flex;gap:var(--space-2)}.control-section{flex:0 1 fit-content;padding:0;background-color:transparent;border-right:none;display:flex;flex-direction:column;min-width:fit-content;width:fit-content;border-radius:0}.preset-effects-container{align-items:center;justify-content:flex-start;flex:0 0 auto;width:fit-content}.control-section h4{margin:0 0 .1em;color:var(--c-text-muted);font-size:.9em;text-transform:uppercase;letter-spacing:.5px;flex-shrink:0;width:100%;text-align:center}.rhythm-structure-container{flex-direction:column;gap:.4rem}.control-subsection{display:flex;flex-direction:column}.control-subsection h4{margin:0;color:var(--c-text-muted);font-size:.9em;text-transform:uppercase;letter-spacing:.5px;flex-shrink:0;width:100%}.macrobeat-adjust-group,.toggle-button-group{display:flex;gap:var(--space-2);justify-content:center}.modulation-controls{display:flex;gap:var(--space-2);align-items:center}.rhythm-stamps-container{display:flex;flex-direction:row!important;height:auto}.rhythm-tab-sidebar{flex:0 0 80px;display:flex;flex-direction:column;background-color:var(--c-gridline);border-right:1px solid var(--c-border)}.rhythm-tab-content{flex:1;padding:.1em;background-color:var(--c-bg);overflow:auto;min-width:0}.rhythm-tab-panel{display:none;padding:0}.rhythm-tab-panel.active{display:block}.stamps-toolbar-container{display:flex;justify-content:center;padding-left:.3rem}.stamps-grid{display:flex;flex-direction:column}.stamps-row{display:grid;gap:.5rem;justify-items:center}.stamps-row-1{grid-template-columns:repeat(4,1fr)}.stamps-row-2{grid-template-columns:repeat(6,1fr);padding-top:.42rem}.stamps-row-3{grid-template-columns:repeat(5,1fr);padding-top:.42rem}.triplets-toolbar-container{display:flex;justify-content:center}.triplets-main-container{display:flex;flex-direction:column;align-items:center}.triplets-sections{display:flex;flex-direction:column;gap:.3rem}.triplets-section{display:flex;flex-direction:column;gap:.3rem;align-items:center}.triplets-grid{display:grid;grid-template-columns:repeat(7,1fr);justify-items:center;gap:.5rem}.triplets-quarter-row{grid-template-columns:repeat(3,1fr);margin-bottom:.2rem}.triplets-quarter-row:nth-child(2){grid-template-columns:repeat(4,1fr);margin-bottom:0}#pitch-grid-wrapper{width:fit-content;min-width:fit-content;display:flex;flex-direction:column;flex:1;min-height:200px;overflow-x:hidden;overflow-y:hidden;position:relative}#canvas-macrobeat-tools{flex-shrink:0}#pitch-grid-container{flex:1;position:relative;width:fit-content;overflow-x:visible;overflow-y:hidden;min-height:0;background-color:#fff}#grid-container{position:relative;height:100%;width:100%}#pitch-canvas-wrapper{position:absolute;top:0;left:0;width:100%;height:100%}#notation-grid,#playhead-canvas,#hover-canvas,#pitch-paint-canvas{position:absolute;top:0;left:0;display:block}#playhead-canvas,#hover-canvas,#drum-hover-canvas,#pitch-paint-canvas{pointer-events:none}#drum-grid-wrapper{flex:0 0 auto;width:fit-content;min-height:90px;overflow:hidden;position:relative;background-color:var(--c-surface);border-radius:0 0 var(--border-radius-md) var(--border-radius-md)}#drum-grid,#drum-hover-canvas{display:block;position:absolute;top:0;left:0}#sidebar{position:fixed;top:0;left:0;width:250px;height:100%;background-color:#f8f9faf2;border-right:1px solid var(--c-border);box-shadow:var(--box-shadow-md);padding:var(--space-4);display:flex;flex-direction:column;gap:var(--space-4);z-index:2000;transform:translate(-100%);transition:transform .3s ease-in-out;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}body.sidebar-open #sidebar{transform:translate(0)}.sidebar-container{border:1px solid var(--c-border);border-radius:var(--border-radius-md);padding:var(--space-3);background-color:var(--c-surface)}.sidebar-container .app-title{text-align:center;font-weight:700;line-height:1.2;color:var(--c-text-muted)}.sidebar-button{display:flex;align-items:center;gap:var(--space-2);width:100%;padding:var(--space-2) var(--space-3);text-align:left;margin-bottom:var(--space-2)}.sidebar-button:last-child{margin-bottom:0}.sidebar-button img{width:20px;height:20px;flex-shrink:0}#sidebar-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0006;z-index:1999;opacity:0;visibility:hidden;transition:opacity .3s ease-in-out,visibility .3s ease-in-out}body.sidebar-open #sidebar-overlay{opacity:1;visibility:visible}#volume-control-wrapper{position:relative}#volume-popup{position:absolute;top:50%;left:100%;transform:translateY(-50%);background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);padding:var(--space-2) var(--space-3);margin-left:var(--space-2);box-shadow:var(--box-shadow-sm);z-index:1001;visibility:hidden;opacity:0;transition:opacity .2s,visibility .2s}#volume-popup.visible{visibility:visible;opacity:1}input[type=range][orient=vertical]{-moz-appearance:none;appearance:none;-webkit-appearance:none;writing-mode:initial;direction:initial;width:120px;height:8px;padding:5px 0}.sidebar-section-title{margin:0 0 var(--space-2) 0;color:var(--c-text-muted);font-size:.9em;text-transform:uppercase;letter-spacing:.5px;font-weight:600;text-align:center}.sidebar-paint-controls{display:flex;flex-direction:column;gap:var(--space-3)}.sidebar-paint-controls .paint-control-group{display:flex;flex-direction:column;gap:var(--space-1)}.sidebar-paint-controls .paint-control-group label{font-size:.9rem;font-weight:500;color:var(--c-text-muted);margin-bottom:var(--space-1)}.paint-control-select{width:100%;padding:var(--space-1) var(--space-2);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);background-color:var(--c-surface);color:var(--c-text);font-family:var(--main-font);font-size:.9rem;cursor:pointer}.paint-control-select:focus{outline:none;border-color:var(--c-accent);box-shadow:0 0 0 2px rgba(var(--c-accent-rgb),.2)}.paint-control-select:hover{border-color:var(--c-text-muted)}.mic-device-selector{width:100%;padding:var(--space-1) var(--space-2);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);background-color:var(--c-surface);color:var(--c-text);font-family:var(--main-font);font-size:.9rem}.mic-device-selector:focus{outline:none;border-color:var(--c-accent);box-shadow:0 0 0 2px rgba(var(--c-accent-rgb),.2)}#print-preview-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;justify-content:center;align-items:center;z-index:1000;opacity:1;transition:opacity .3s ease}#print-preview-overlay.hidden{opacity:0;pointer-events:none}#print-preview-modal{background-color:var(--c-surface);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-md);width:80vw;height:80vh;display:flex;flex-direction:column}.print-preview-header{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;border-bottom:1px solid var(--c-border);flex-shrink:0}.print-preview-header h2{margin:0;font-size:18px}.print-preview-content{flex-grow:1;display:flex;gap:20px;padding:20px;min-height:0}.print-preview-canvas-wrapper{flex-grow:1;border:1px dashed var(--c-border);background-color:var(--c-bg);overflow:auto;padding:10px}#print-preview-canvas{display:block;background-color:#fff}.print-preview-options{flex-basis:280px;flex-shrink:0;display:flex;flex-direction:column;gap:15px}.print-option-row{display:grid;grid-template-columns:90px 40px 1fr;align-items:center;gap:10px}.print-option-row label{font-weight:700}.print-option-row span{font-family:monospace;font-size:12px}.print-preview-options h3{margin-top:10px;margin-bottom:5px;border-bottom:1px solid var(--c-gridline);padding-bottom:5px}.print-preview-footer{padding:10px 20px;border-top:1px solid var(--c-border);text-align:right;flex-shrink:0}.close-button{background:none;border:none;font-size:24px;line-height:1;padding:0 5px;color:var(--c-text-muted);cursor:pointer}.confirm-button{background-color:#28a745;font-weight:700}.confirm-button:hover{background-color:#218838}.toggle-button{width:100%;grid-column:2 / -1}.toggle-button.active{background-color:var(--c-accent)}.toggle-button:not(.active){background-color:var(--c-gridline);color:var(--c-text)}#notification-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0006;display:flex;justify-content:center;align-items:center;z-index:2000;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}#notification-overlay.visible{opacity:1;visibility:visible}.notification-modal{background-color:var(--c-surface);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-md);max-width:400px;width:90%;padding:var(--space-4);text-align:center;transform:scale(.9) translateY(20px);transition:transform .3s ease}#notification-overlay.visible .notification-modal{transform:scale(1) translateY(0)}.notification-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-3)}.notification-title{font-size:var(--font-size-lg);font-weight:600;color:var(--c-text);margin:0}.notification-close{background:none;border:none;font-size:20px;line-height:1;padding:var(--space-1);color:var(--c-text-muted);cursor:pointer;border-radius:var(--border-radius-sm);transition:background-color .2s ease}.notification-close:hover{background-color:var(--c-gridline)}.notification-message{font-size:var(--font-size-base);color:var(--c-text);margin-bottom:var(--space-4);line-height:1.5}.notification-actions{display:flex;gap:var(--space-2);justify-content:center}.notification-button{background-color:var(--c-accent);color:var(--c-surface);border:none;border-radius:var(--border-radius-md);padding:var(--space-2) var(--space-4);font-family:var(--main-font);font-size:var(--font-size-sm);font-weight:500;cursor:pointer;transition:background-color .2s ease}.notification-button:hover{background-color:var(--c-accent-hover)}.notification-button.secondary{background-color:var(--c-gridline);color:var(--c-text)}.notification-button.secondary:hover{background-color:var(--c-border)}@media print{body>#app-container,body>#print-preview-overlay{display:none!important}#print-staging-area{display:block!important;visibility:visible!important;margin:0;padding:0}#print-staging-area img{display:block!important;visibility:visible!important;width:100%;height:auto}}#print-staging-area{display:none}#canvas-macrobeat-tools{position:relative;display:flex;flex-direction:column;margin-block-end:var(--space-1)}#canvas-macrobeat-tools #accidental-controls-container-v2{position:absolute;right:100%;top:50%;transform:translateY(-50%);z-index:10;margin-right:var(--space-1)}#time-signature-display{height:20px;width:100%;position:relative}#beat-line-controls{height:2em;position:relative}.rhythm-ui-button{background-color:#ffffff80;color:var(--c-text);border:1px solid var(--c-border);border-radius:50%;width:20px;height:20px;padding:0;line-height:18px;text-align:center;z-index:10;position:absolute;transform:translate(-50%);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.rhythm-ui-button:hover{background-color:var(--c-surface);border-color:var(--c-text)}.time-signature-label{background:#ffffff80;border-radius:12px;font-weight:700;font-size:1.1em;color:var(--c-text-muted);-webkit-user-select:none;user-select:none;position:absolute;transform:translate(-50%);top:var(--time-sig-vertical-offset, .25rem);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);border:2px solid var(--c-border)}.time-signature-label.anacrusis-label{color:var(--c-border)}input[type=range]{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:100%;height:var(--space-2);border-radius:var(--border-radius-sm);background:var(--c-gridline);outline:none;margin-block-start:var(--space-2);margin-block-end:0}#tempo-slider{writing-mode:vertical-lr;direction:rtl;width:var(--space-2);height:150px;margin:var(--space-2) auto;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:var(--c-gridline);border-radius:var(--border-radius-sm);outline:none}#tempo-slider::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:18px;height:18px;border-radius:50%;background:#f8f8f8;border:2px solid #e0e0e0;cursor:pointer}#tempo-slider::-webkit-slider-thumb:active{background:#f8f8f8;border:2px solid #e0e0e0}#tempo-slider::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:#f8f8f8;border:2px solid #e0e0e0;cursor:pointer}#tempo-slider::-moz-range-thumb:active{background:#f8f8f8;border:2px solid #e0e0e0}#tempo-slider::-moz-range-track{background:var(--c-gridline);border-radius:var(--border-radius-sm);border:none}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:18px;height:18px;border-radius:50%;background:var(--c-text);border:2px solid var(--c-surface);box-shadow:var(--box-shadow-sm);cursor:pointer}input[type=range]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--c-text);border:2px solid var(--c-surface);box-shadow:var(--box-shadow-sm);cursor:pointer}.slider-label{margin-block-start:var(--space-2);color:var(--c-text-muted);text-align:center;-webkit-user-select:none;user-select:none}.control-section:has(.tempo-container){width:auto;min-width:max-content}.tempo-container{display:grid;grid-template-columns:1fr auto;grid-template-rows:1fr;gap:var(--space-3);background-color:transparent;border:none;padding:0 var(--space-1);border-radius:0;height:100%;flex:1;width:auto;min-width:max-content;align-items:stretch}.tempo-column{display:flex;flex-direction:column;justify-content:space-around;align-items:center;gap:.5em;grid-column:1;grid-row:1;height:100%}.tempo-column-2{display:flex;justify-content:center;align-items:center;grid-column:2;grid-row:1;min-width:max-content;width:max-content;padding:0rem}.tempo-input-group{display:flex;align-items:center;gap:var(--space-2)}.tempo-label-icon{height:1.5rem;width:auto;-webkit-user-select:none;user-select:none}.tempo-input{width:45px;background-color:var(--c-bg);color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);text-align:center;font-family:var(--main-font)}.tempo-input::-webkit-outer-spin-button,.tempo-input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.draggable-number-input{cursor:ns-resize;transition:border-color .2s ease,box-shadow .2s ease}.draggable-number-input:hover{border-color:var(--c-accent)}.draggable-number-input:focus{cursor:text;box-shadow:0 0 0 2px var(--c-accent-light)}#note-bank-container{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--space-2)}.note-bank-row{display:flex;flex-direction:row;gap:var(--space-2)}.note-pair{display:flex;flex-direction:row;align-items:center;gap:var(--space-1);padding:3px;border-radius:var(--border-radius-md);border:2px solid transparent}.note{width:var(--note-size);height:var(--note-size);margin:0;cursor:pointer;border-radius:50%;transition:all .2s;background-color:transparent;border:4px solid var(--note-color)}.note:hover{transform:scale(1.1)}.oval-note{width:calc(var(--note-size) * .7)}.note-pair[data-color="#4a90e2"] .note{--note-color: #4a90e2}.note-pair[data-color="#2d2d2d"] .note{--note-color: #2d2d2d}.note-pair[data-color="#d66573"] .note{--note-color: #d66573}.note-pair[data-color="#68a03f"] .note{--note-color: #68a03f}.eraser-icon{width:24px;height:24px;object-fit:contain}.tab-button{padding:.84rem .3rem;background-color:transparent;border:1px solid transparent;border-bottom-color:var(--c-border);color:var(--c-text-muted);font-family:var(--main-font);font-size:1.2em;font-weight:500;cursor:pointer;text-align:left;transition:all .2s ease;position:relative;border-top-left-radius:var(--border-radius-md);border-bottom-left-radius:var(--border-radius-md)}.tab-button:hover{background-color:#0000000d;color:var(--c-text)}.tab-button.active{background-color:var(--c-bg);color:var(--c-accent);font-weight:600;margin-right:-1px;position:relative;z-index:1;border-color:var(--c-border);border-right-color:transparent;border-top-right-radius:0;border-bottom-right-radius:0}.sidebar-button{background-color:transparent;border:none;border-radius:var(--border-radius-md);padding:var(--space-2) var(--space-3);margin-bottom:var(--space-2);display:flex;align-items:center;gap:var(--space-2);width:100%;text-align:left}.sidebar-button:hover{background-color:var(--c-gridline)}.sidebar-button img{width:20px;height:20px;flex-shrink:0;object-fit:contain}.sidebar-button-text{font-size:1rem;color:var(--c-text);font-weight:600;white-space:nowrap}.toolkit-button{line-height:1.2;padding:var(--space-2)}.toolkit-icon-button{font-size:14px;width:2rem;height:2rem;padding:.2rem;display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;color:var(--c-text-muted);border-radius:var(--border-radius-md);transition:background-color .2s,transform .1s ease;position:relative}.toolkit-icon-button img{width:100%;height:100%;object-fit:contain;pointer-events:none;transition:background-color .2s,transform .1s ease}.toolkit-icon-button:hover img{background-color:var(--c-gridline)}.toolkit-icon-button:focus img{background-color:var(--c-gridline);outline:none}.toolkit-icon-button:active{transform:scale(.92);transition-duration:.05s}.toolkit-icon-button:active img{background-color:#00000026}.playback-row{display:flex;flex-direction:column;align-items:stretch;justify-content:center;gap:var(--space-2);padding:var(--space-1)}.playback-row .toolkit-icon-button{flex:1;text-align:center;justify-content:center}.preset-effects-container{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;flex:0 0 auto;width:fit-content;gap:0}.preset-effects-tabs{display:flex;gap:0;margin-bottom:0}.preset-tab-button{padding:var(--space-1) var(--space-3);background-color:transparent;border:1px solid var(--c-border);border-bottom:none;color:var(--c-text-muted);font-family:var(--main-font);font-size:.875rem;font-weight:500;cursor:pointer;text-align:center;transition:all .2s ease;position:relative;border-top-left-radius:var(--border-radius-md);border-top-right-radius:var(--border-radius-md);border-bottom-left-radius:0;border-bottom-right-radius:0}.preset-tab-button:first-child{border-right:none}.preset-tab-button:hover{background-color:#0000000d;color:var(--c-text)}.preset-tab-button.active{background-color:var(--c-surface);color:var(--c-text);font-weight:600;border-color:var(--c-border);border-bottom-color:var(--c-surface);z-index:2;margin-bottom:-1px}.preset-effects-content{position:relative;width:100%}.preset-tab-panel{display:none}.preset-tab-panel.active{display:block}.preset-content-box,.effects-content-box{background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:16px;padding:var(--space-1);box-shadow:var(--box-shadow-sm);position:relative;z-index:1;width:16rem;min-width:280px;overflow:visible}.effects-content-box{height:fit-content}.preset-tab-panel.active .preset-content-box:before{content:"";position:absolute;top:-1px;left:calc(50% - 80px);width:80px;height:1px;background-color:var(--c-surface);z-index:3}.preset-tab-panel.active .effects-content-box:before{content:"";position:absolute;top:-1px;left:50%;width:70px;height:1px;background-color:var(--c-surface);z-index:3}.preset-grid{display:flex;gap:var(--space-2)}.preset-column{display:flex;flex-direction:column;gap:var(--space-1)}.preset-button{width:95px;justify-content:center;display:flex;align-items:center;padding:var(--space-1);background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.preset-button:hover{background-color:var(--c-border)}.preset-effects-container .preset-button.selected{background-color:var(--c-accent-light, #63a9fd)!important;color:var(--c-text, #212529)!important;border-color:var(--c-accent, #4A90E2)!important;font-weight:600!important;box-shadow:0 0 0 1px var(--c-accent, #4A90E2)!important;transform:scale(.98)!important;opacity:1!important}.effects-grid{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(2,1fr);row-gap:.15rem;column-gap:.15rem;margin-bottom:0}.effect-button{width:4.5rem;justify-content:center;display:flex;align-items:center;padding:.1rem;background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:background-color .2s ease}.effect-button:hover{background-color:var(--c-border)}.effect-button.active{background-color:var(--c-accent-light, #63a9fd);color:var(--c-text, #212529);border-color:var(--c-accent, #4A90E2);font-weight:600;box-shadow:0 0 0 2px var(--c-accent, rgba(74, 144, 226, .2));transform:scale(.98)}.effect-controls-container{padding-top:.15rem;margin-top:0rem;min-height:2rem;display:none}.effect-controls-container.active{display:block;min-height:auto;height:fit-content}.effect-controls{display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));gap:var(--space-3);align-items:start;justify-items:center;padding:var(--space-2) 0}.effect-control-group{display:flex;flex-direction:column;gap:var(--space-1);align-items:center;min-width:80px;position:relative}.effect-control-label{font-size:.5rem;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.5px;font-weight:500}.effect-control-slider{width:100%;height:4px;background:var(--c-border);border-radius:2px;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.effect-control-slider::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:var(--c-accent);cursor:pointer;border:2px solid var(--c-surface);box-shadow:0 2px 4px #0003}.effect-control-slider::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:var(--c-accent);cursor:pointer;border:2px solid var(--c-surface);box-shadow:0 2px 4px #0003}.effect-control-value{font-size:.75rem;color:var(--c-text);font-weight:600;min-width:30px;text-align:center}#accidental-controls-container-v2{display:flex;justify-content:center;gap:var(--space-2)}.accidental-button{width:30px;height:30px;font-size:18px;font-weight:700;padding:0;line-height:1;border:1px solid var(--c-border);border-radius:var(--border-radius-sm);background-color:var(--c-surface);color:var(--c-text);opacity:.6}.accidental-button.active{background-color:var(--c-warning);color:var(--c-text);opacity:1}.accidental-button:not(.active):hover{background-color:var(--c-border)}.chord-shape-container{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;flex:0 0 auto;width:fit-content;gap:0}.chord-shape-tabs{display:flex;gap:0;margin-bottom:0}.chord-tab-button{padding:var(--space-1) var(--space-3);background-color:transparent;border:1px solid var(--c-border);border-bottom:none;color:var(--c-text-muted);font-family:var(--main-font);font-size:.875rem;font-weight:500;cursor:pointer;text-align:center;transition:all .2s ease;position:relative;border-top-left-radius:var(--border-radius-md);border-top-right-radius:var(--border-radius-md);border-bottom-left-radius:0;border-bottom-right-radius:0}.chord-tab-button:first-child{border-right:none}.chord-tab-button:hover{background-color:#0000000d;color:var(--c-text)}.chord-tab-button.active{background-color:var(--c-surface);color:var(--c-text);font-weight:600;border-color:var(--c-border);border-bottom-color:var(--c-surface);z-index:2;margin-bottom:-1px}.chord-shape-content{position:relative;width:100%}.chord-tab-panel{display:none}.chord-tab-panel.active{display:block}.intervals-content-box,.chords-content-box{background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:16px;padding:.45rem;box-shadow:var(--box-shadow-sm);position:relative;z-index:1;width:fit-content}.chord-tab-panel.active .intervals-content-box:before{content:"";position:absolute;top:-1px;left:calc(50% - 50px);width:60px;height:1px;background-color:var(--c-surface);z-index:3}.chord-tab-panel.active .chords-content-box:before{content:"";position:absolute;top:-1px;left:calc(50% + 10px);width:50px;height:1px;background-color:var(--c-surface);z-index:3}.harmony-preset-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:var(--space-1);flex:1}.harmony-preset-button{background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);font-size:18px;font-weight:700;min-height:40px}.intervals-layout{display:flex;gap:var(--space-2);align-items:flex-start}.inversion-column{display:flex;flex-direction:column;align-items:flex-start;gap:var(--space-2);flex:0 0 auto}.inversion-column h4{margin:0;color:var(--c-text-muted);font-size:.8em;text-transform:uppercase;letter-spacing:.5px;text-align:center}.toggle-switch{width:20px;height:40px;background-color:var(--c-border);border-radius:10px;position:relative;cursor:pointer;transition:background-color .3s ease}.toggle-switch.active{background-color:var(--c-border)}.toggle-slider{width:16px;height:16px;background-color:var(--c-surface);border-radius:50%;position:absolute;top:2px;left:2px;transition:transform .3s ease;box-shadow:0 1px 3px #0003}.toggle-switch.active .toggle-slider{transform:translateY(20px)}.chords-layout{display:flex;gap:var(--space-2);align-items:flex-start}.chord-inversion-column{display:flex;flex-direction:column;align-items:flex-start;gap:var(--space-2);flex:0 0 auto}.chord-inversion-column h4{margin:0;color:var(--c-text-muted);font-size:.8em;text-transform:uppercase;letter-spacing:.5px;text-align:center}.three-state-toggle{width:20px;height:60px;background-color:var(--c-border);border-radius:10px;position:relative;cursor:pointer;transition:background-color .3s ease}.three-state-toggle.state-1,.three-state-toggle.state-2{background-color:var(--c-border)}.three-state-slider{width:16px;height:16px;background-color:var(--c-surface);border-radius:50%;position:absolute;top:2px;left:2px;transition:transform .3s ease;box-shadow:0 1px 3px #0003}.three-state-toggle.state-1 .three-state-slider{transform:translateY(20px)}.three-state-toggle.state-2 .three-state-slider{transform:translateY(40px)}.state-labels{display:flex;flex-direction:column;justify-content:space-between;height:60px;margin-left:var(--space-3);position:absolute;left:100%;top:0;font-size:.6em;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.3px}.state-label{flex:1;display:flex;align-items:center;height:20px}.four-state-toggle{width:20px;height:80px;background-color:var(--c-border);border-radius:10px;position:relative;cursor:pointer;transition:background-color .3s ease}.four-state-toggle.state-1,.four-state-toggle.state-2,.four-state-toggle.state-3{background-color:var(--c-border)}.four-state-slider{width:16px;height:16px;background-color:var(--c-surface);border-radius:50%;position:absolute;top:2px;left:2px;transition:transform .3s ease;box-shadow:0 1px 3px #0003}.four-state-toggle.state-1 .four-state-slider{transform:translateY(20px)}.four-state-toggle.state-2 .four-state-slider{transform:translateY(40px)}.four-state-toggle.state-3 .four-state-slider{transform:translateY(60px)}.state-labels-4{display:flex;flex-direction:column;justify-content:space-between;height:80px;margin-left:var(--space-3);position:absolute;left:100%;top:0;font-size:.6em;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.3px}.state-labels-4 .state-label{flex:1;display:flex;align-items:center;height:20px}.five-state-toggle{width:20px;height:100px;background-color:var(--c-border);border-radius:10px;position:relative;cursor:pointer;transition:background-color .3s ease}.five-state-toggle.state-1,.five-state-toggle.state-2,.five-state-toggle.state-3,.five-state-toggle.state-4{background-color:var(--c-border)}.five-state-slider{width:16px;height:16px;background-color:var(--c-surface);border-radius:50%;position:absolute;top:2px;left:2px;transition:transform .3s ease;box-shadow:0 1px 3px #0003}.five-state-toggle.state-1 .five-state-slider{transform:translateY(20px)}.five-state-toggle.state-2 .five-state-slider{transform:translateY(40px)}.five-state-toggle.state-3 .five-state-slider{transform:translateY(60px)}.five-state-toggle.state-4 .five-state-slider{transform:translateY(80px)}.state-labels-5{display:flex;flex-direction:column;justify-content:space-between;height:100px;margin-left:var(--space-3);position:absolute;left:100%;top:0;font-size:.6em;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.3px}.state-labels-5 .state-label{flex:1;display:flex;align-items:center;height:20px}.six-state-toggle{width:20px;height:120px;background-color:var(--c-border);border-radius:10px;position:relative;cursor:pointer;transition:background-color .3s ease}.six-state-toggle.state-1,.six-state-toggle.state-2,.six-state-toggle.state-3,.six-state-toggle.state-4,.six-state-toggle.state-5{background-color:var(--c-border)}.six-state-slider{width:16px;height:16px;background-color:var(--c-surface);border-radius:50%;position:absolute;top:2px;left:2px;transition:transform .3s ease;box-shadow:0 1px 3px #0003}.six-state-toggle.state-1 .six-state-slider{transform:translateY(20px)}.six-state-toggle.state-2 .six-state-slider{transform:translateY(40px)}.six-state-toggle.state-3 .six-state-slider{transform:translateY(60px)}.six-state-toggle.state-4 .six-state-slider{transform:translateY(80px)}.six-state-toggle.state-5 .six-state-slider{transform:translateY(100px)}.state-labels-6{display:flex;flex-direction:column;justify-content:space-between;height:120px;margin-left:var(--space-3);position:absolute;left:100%;top:0;font-size:.6em;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.3px}.state-labels-6 .state-label{flex:1;display:flex;align-items:center;height:20px}.hidden{display:none}.intervals-grid-column,.chords-grid-column{flex:1}.intervals-4x4-grid{gap:2px}.intervals-4x4-grid .harmony-preset-button{width:40px;height:30px;min-height:20px;display:flex;align-items:center;justify-content:center;padding:0}.harmony-preset-button:hover{background-color:var(--c-border)}.harmony-preset-button:focus{background-color:var(--c-surface);color:var(--c-text);outline:none}.harmony-preset-button:focus:hover{background-color:var(--c-border)}.harmony-preset-button.selected:focus{background-color:var(--c-accent);color:var(--c-surface)}.harmony-preset-button.selected{background-color:var(--c-accent-light, #63a9fd);color:var(--c-text, #212529);border-color:var(--c-accent, #4A90E2);font-weight:600}.tonic-dropdown-toggle,.degree-dropdown-toggle{display:flex;align-items:center;gap:var(--space-2);justify-content:center;background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border)}.tonic-dropdown-toggle{padding:var(--space-1) var(--space-2)}.dropdown-menu{display:none;position:absolute;top:100%;left:50%;transform:translate(-50%);background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-md);z-index:1001;padding:var(--space-1);flex-direction:column;gap:0rem;margin-top:0rem;overflow-y:auto;white-space:nowrap;width:max-content}.tonic-sign-button{background:transparent;border:none;padding:var(--space-1);display:flex;align-items:center;gap:var(--space-2);white-space:nowrap}.tonic-sign-button:hover{background-color:var(--c-border)}.mode-label{font-size:var(--font-size-sm);color:var(--c-text-muted);font-weight:400}.tonic-shape-icon{width:1.5rem;height:1.5rem;object-fit:contain;display:block}.dropdown-menu .tonic-shape-icon{width:32px;height:32px}.tonic-dropdown-toggle.selected,#degree-dropdown-menu .toolkit-button.active{border-color:var(--c-accent);box-shadow:0 0 5px var(--c-accent)}.dropdown-menu .tonic-sign-button:hover,.dropdown-menu .tonic-sign-button.selected:hover,#degree-dropdown-menu .toolkit-button:hover{background-color:var(--c-border)!important;color:var(--c-text)!important}#degree-dropdown-menu .toolkit-button:not(.active):hover{background-color:var(--c-border)!important;color:var(--c-text)!important}.tonic-dropdown-toggle:hover,.degree-dropdown-toggle:hover{background-color:var(--c-border)!important;color:var(--c-text)!important}.time-signature-label{cursor:pointer;padding:2px 6px;border-radius:var(--border-radius-sm);transition:background-color .2s ease}.time-signature-label:hover{background-color:var(--c-gridline)}.time-signature-dropdown{position:fixed;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-md);z-index:1000;max-width:300px;max-height:400px;overflow-y:auto;padding:var(--space-2)}.time-signature-dropdown.hidden{display:none}.dropdown-category{margin-bottom:var(--space-3)}.dropdown-category:last-child{margin-bottom:0}.dropdown-category-header{font-size:var(--font-size-sm);font-weight:600;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.5px;margin-bottom:var(--space-2);padding-bottom:var(--space-1);border-bottom:1px solid var(--c-gridline)}.dropdown-option{display:flex;flex-direction:column;padding:var(--space-2);cursor:pointer;border-radius:var(--border-radius-sm);transition:background-color .2s ease;margin-bottom:var(--space-1)}.dropdown-option:hover{background-color:var(--c-gridline)}.dropdown-option:last-child{margin-bottom:0}.dropdown-label{font-weight:600;font-size:var(--font-size-base);color:var(--c-text)}.dropdown-description{font-size:var(--font-size-sm);color:var(--c-text-muted);margin-top:2px}.dial-container{display:flex;flex-direction:column;align-items:center;gap:var(--space-1);-webkit-user-select:none;user-select:none}.dial-svg{cursor:pointer;transition:transform .1s ease}.dial-svg:hover{transform:scale(1.05)}.dial-svg.dragging{cursor:grabbing;transform:scale(1.1)}.dial-background{fill:var(--c-surface);stroke:var(--c-border);stroke-width:2}.dial-track{stroke:var(--c-border);stroke-width:4;stroke-linecap:round;opacity:.3}.dial-handle{stroke:var(--c-accent);stroke-width:4;stroke-linecap:round;filter:drop-shadow(0 0 3px var(--c-accent))}.dial-handle-line{stroke:var(--c-accent);stroke-width:3;stroke-linecap:round;filter:drop-shadow(0 0 2px var(--c-accent))}.dial-indicator{fill:var(--c-accent);stroke:var(--c-surface);stroke-width:2;filter:drop-shadow(0 0 3px var(--c-accent))}.dial-screw{fill:var(--c-text-muted);stroke:var(--c-border);stroke-width:1}.dial-label{font-size:.8rem;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.5px;font-weight:500;text-align:center;margin-bottom:var(--space-1)}.dial-value{font-size:.75rem;color:var(--c-text);font-weight:600;min-width:30px;text-align:center;background-color:var(--c-gridline);padding:2px 6px;border-radius:var(--border-radius-sm);border:1px solid var(--c-border)}.dial-svg:hover .dial-background{fill:var(--c-gridline)}.dial-svg:hover .dial-handle{stroke-width:5}.dial-svg:hover .dial-handle-line{stroke-width:4}.dial-svg:hover .dial-indicator{r:5;filter:drop-shadow(0 0 4px var(--c-accent))}.dial-svg.dragging .dial-background{fill:var(--c-gridline);stroke:var(--c-accent)}.dial-svg.dragging .dial-handle{stroke-width:5;filter:drop-shadow(0 0 6px var(--c-accent))}.dial-svg.dragging .dial-indicator{r:5;filter:drop-shadow(0 0 6px var(--c-accent));stroke-width:3}.dial-svg.dragging .dial-value{background-color:var(--c-accent);color:var(--c-surface);border-color:var(--c-accent-hover)}.effect-control-group .nexus-dial-label{font-size:.8rem;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.5px;font-weight:500;text-align:center;margin-bottom:var(--space-1)}.effect-control-group .nexus-dial-value{font-size:.75rem;color:var(--c-text);font-weight:600;min-width:30px;text-align:center;background-color:var(--c-surface);padding:.5rem;border-radius:var(--border-radius-sm);border:1px solid var(--c-border);box-shadow:0 4px 12px #0003;position:absolute;z-index:1000;top:-40px;left:50%;transform:translate(-50%);opacity:0;pointer-events:none;transition:opacity .2s ease,transform .2s ease;display:none}.effect-control-group svg{filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}.effect-control-group svg circle:first-child{fill:var(--c-surface)!important;stroke:var(--c-border)!important;stroke-width:2!important}.effect-control-group svg circle:last-child{fill:var(--c-text-muted)!important}.effect-control-group svg path{stroke:var(--c-accent)!important;fill:var(--c-accent)!important}.effect-control-group:hover svg{transform:scale(1.05);transition:transform .2s ease}.effect-control-group:hover svg circle:first-child{fill:var(--c-gridline)!important}.effect-control-group:hover .nexus-dial-value{display:block;opacity:1;transform:translate(-50%) translateY(-5px);background-color:var(--c-accent);color:var(--c-surface);border-color:var(--c-accent-hover)}#dial-container{display:flex;justify-content:center;align-items:flex-start;flex-direction:row;row-gap:0rem;column-gap:var(--space-3);padding-right:.4rem;padding-left:.1rem;padding-bottom:0rem;overflow:visible;background-color:var(--c-gridline);border:1px solid var(--c-border);border-radius:10px;margin:0 auto;width:fit-parent;height:fit-content}#dial-container svg{overflow:visible}.dial-wrapper{display:flex;flex-direction:column;align-items:center;gap:0rem;position:relative;margin:0rem}.dial-value{font-size:.75rem;color:var(--c-text);font-weight:600;min-width:30px;text-align:center;background-color:var(--c-surface);padding:2px 6px;border-radius:var(--border-radius-sm);border:1px solid var(--c-border);box-shadow:0 4px 12px #0003;position:absolute;z-index:1000;bottom:-40px;left:50%;transform:translate(-50%);transition:opacity .2s ease,transform .2s ease;display:none}.dial-value-hidden{display:none}.dial-value-visible{display:block;opacity:1;transform:translate(-50%) translateY(5px);background-color:var(--c-accent);color:var(--c-surface);border-color:var(--c-accent-hover);box-shadow:0 4px 12px #0003}.rhythm-tab-button{padding:var(--space-2) var(--space-1);background-color:transparent;border:1px solid transparent;border-bottom-color:var(--c-border);color:var(--c-text-muted);font-family:var(--main-font);font-size:.75rem;font-weight:500;cursor:pointer;text-align:center;transition:all .2s ease;position:relative;border-top-left-radius:var(--border-radius-md);border-bottom-left-radius:var(--border-radius-md)}.rhythm-tab-button:hover{background-color:#0000000d;color:var(--c-text)}.rhythm-tab-button.active{background-color:var(--c-bg);color:var(--c-accent);font-weight:600;margin-right:-1px;position:relative;z-index:1;border-color:var(--c-border);border-right-color:transparent;border-top-right-radius:0;border-bottom-right-radius:0}.stamp-button{position:relative;width:fit-content;height:fit-content;min-width:0rem;min-height:0rem;background-color:var(--c-surface);border:2px solid var(--c-border);border-radius:var(--border-radius-md);cursor:pointer;transition:all .2s ease;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0rem}.stamp-button:hover{background-color:var(--c-gridline);transform:scale(1.05);border-color:var(--c-accent)}.stamp-button.active{background-color:var(--c-accent-light, #63a9fd)!important;color:var(--c-text, #212529)!important;border-color:var(--c-accent, #4A90E2)!important;font-weight:600!important;box-shadow:0 0 0 1px var(--c-accent, #4A90E2)!important;transform:scale(.98)!important;opacity:1!important}.stamp-button svg{flex-shrink:0}.stamp-number{font-size:.7rem;font-weight:600;color:var(--c-text-muted);line-height:1}.stamp-button.active .stamp-number{color:var(--c-text)}.triplet-button{position:relative;width:fit-content;height:fit-content;min-width:0rem;min-height:0rem;background-color:var(--c-surface);border:2px solid var(--c-border);border-radius:var(--border-radius-md);cursor:pointer;transition:all .2s ease;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0rem}.triplet-button:hover{background-color:var(--c-gridline);transform:scale(1.05);border-color:var(--c-accent)}.triplet-button.active{background-color:var(--c-accent-light, #63a9fd)!important;color:var(--c-text, #212529)!important;border-color:var(--c-accent, #4A90E2)!important;font-weight:600!important;box-shadow:0 0 0 1px var(--c-accent, #4A90E2)!important;transform:scale(.98)!important;opacity:1!important}.triplet-button svg{flex-shrink:0}.triplet-button-wide{min-width:96px;position:relative}.triplet-button-wide:after{content:"";position:absolute;top:10%;bottom:10%;left:50%;width:1px;border-left:1px dashed var(--c-border);pointer-events:none;z-index:1}.triplets-header{font-size:1.1rem;font-weight:600;color:var(--c-text);margin:0;text-align:center}.sidebar-toggle-button{flex:1;padding:var(--space-2);text-align:center;background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);opacity:.6}.sidebar-toggle-button.active{background-color:var(--c-warning);color:var(--c-text);border-color:var(--c-border);opacity:1}.sidebar-toggle-button:not(.active):hover{background-color:var(--c-border)}.macrobeat-adjust-group .toolkit-button{background-color:var(--c-surface);border:1px solid var(--c-border);color:var(--c-text);transition:background-color .1s ease,transform .1s ease}.macrobeat-adjust-group .toolkit-button:hover{background-color:var(--c-border)}.macrobeat-adjust-group .toolkit-button:active{background-color:var(--c-warning);transform:scale(.95);transition:background-color .1s ease,transform .1s ease}.modulation-controls .toolkit-button{font-size:12px;padding:var(--space-1) var(--space-2);background-color:var(--c-bg-muted);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);color:var(--c-text);transition:all .2s ease;cursor:pointer;min-width:50px}.modulation-controls .toolkit-button:hover{background-color:var(--c-bg-accent);border-color:var(--c-accent);color:var(--c-accent)}.modulation-controls .toolkit-button.active{background-color:var(--c-accent);border-color:var(--c-accent);color:#fff;font-weight:600}.modulation-ratio-btn[data-ratio="2:3"].active{background-color:#dc3545;border-color:#dc3545}.modulation-ratio-btn[data-ratio="3:2"].active{background-color:#007bff;border-color:#007bff}.modulation-ratio-btn[data-ratio="2:3"]:hover{background-color:#dc35451a;border-color:#dc3545;color:#dc3545}.modulation-ratio-btn[data-ratio="3:2"]:hover{background-color:#007bff1a;border-color:#007bff;color:#007bff}#harmony-toolkit-container{display:flex;align-items:center;justify-content:center;padding:0 var(--space-2)}#x-chord-shape-tool{width:40px;height:40px;font-size:20px;font-weight:700;padding:0;border:1px solid var(--c-border);background-color:var(--c-surface);color:var(--c-text);border-radius:var(--border-radius-sm)}#x-chord-shape-tool.selected{border:2px solid var(--c-accent);box-shadow:0 0 5px var(--c-accent)}#chord-toolbar-wrapper{background-color:var(--c-gridline);border:1px solid var(--c-border);border-radius:var(--border-radius-md);display:flex;align-items:center;padding:var(--space-1);margin-top:var(--space-2);width:100%;box-shadow:none;transition:opacity .2s}#chord-toolbar-wrapper.collapsed{display:none}.chord-toolbar-panel{display:flex;gap:var(--space-1)}.chord-toolbar-panel select{padding:var(--space-1);border-radius:var(--border-radius-sm);border:1px solid var(--c-border);background-color:var(--c-bg);transition:border-color .2s}.chord-toolbar-panel select option:disabled{color:var(--c-text-muted);opacity:.5;pointer-events:none}.chord-toolbar-panel select.invalid-reset{border-color:var(--c-danger);box-shadow:0 0 3px var(--c-danger)}#chord-toolbar-collapse-btn{background:none;border:none;color:var(--c-text-muted);font-size:16px;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:var(--border-radius-sm)}#chord-toolbar-collapse-btn:hover{background-color:var(--c-gridline)}.dropdown-container{position:relative;display:inline-block}.dropdown-container.open{z-index:1000}.tonic-dropdown-toggle{display:flex;align-items:center;gap:var(--space-2);min-width:60px;width:fit-content;justify-content:center;background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border)}#tonic-dropdown-label{display:flex;align-items:center;gap:var(--space-1)}#tonic-dropdown-label .tonic-shape-icon{display:inline-block;flex-shrink:0}.dropdown-arrow{font-size:10px;transition:transform .2s ease}.dropdown-container.open .dropdown-arrow{transform:rotate(180deg)}.dropdown-menu{display:none;position:absolute;top:100%;left:0;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);box-shadow:var(--box-shadow-md);z-index:1001;padding:var(--space-1);flex-direction:column;gap:var(--space-1)}.dropdown-container.open .dropdown-menu{display:flex}.dropdown-menu .tonic-sign-button{width:100%;border:2px solid transparent}.dropdown-menu .tonic-sign-button.selected{border-color:var(--c-accent)!important;background-color:var(--c-accent-hover);color:var(--c-surface)}.tonic-dropdown-toggle.selected{border:2px solid var(--c-accent);box-shadow:0 0 5px var(--c-accent)}.tonic-tools-wrapper,.degree-toggle-container{display:flex;flex-direction:column;gap:var(--space-2);align-items:center}.degree-mode-toggle-container{display:flex;justify-content:center}.degree-toggle-container .two-state-toggle{position:relative;width:120px;height:30px;background-color:var(--c-gridline);border:2px solid var(--c-border);border-radius:15px;cursor:pointer;-webkit-user-select:none;user-select:none;transition:all .3s ease}.degree-toggle-container .two-state-toggle.disabled{opacity:.5;background-color:var(--c-border)}.degree-toggle-container .two-state-slider{position:absolute;top:2px;left:2px;width:56px;height:26px;background-color:var(--c-accent);border-radius:13px;transition:transform .3s ease;box-shadow:0 2px 4px #0003}.degree-toggle-container .two-state-toggle.active .two-state-slider{transform:translate(60px)}.degree-toggle-container .toggle-labels{display:flex;justify-content:space-between;align-items:center;height:100%;padding:0 var(--space-2);pointer-events:none}.degree-toggle-container .toggle-label{font-size:.7em;font-weight:600;color:var(--c-text-muted);transition:color .3s ease;z-index:1}.degree-toggle-container .two-state-toggle:not(.active) .toggle-label:first-child,.degree-toggle-container .two-state-toggle.active .toggle-label:last-child{color:var(--c-surface)}.degree-toggle-container .two-state-toggle.disabled .toggle-label{color:var(--c-text-muted);opacity:.7}.degree-toggle-container{display:flex;flex-direction:column;gap:var(--space-1)}.degree-visibility-toggle{width:100%;display:flex;justify-content:center;align-items:center;padding:var(--space-2);background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);opacity:.6;transition:background-color .2s,color .2s,opacity .2s}.degree-visibility-toggle.active{background-color:var(--c-surface);color:var(--c-text);opacity:1}.degree-visibility-toggle:not(.active):hover{background-color:var(--c-border)}.degree-mode-toggle{width:100%;display:flex;justify-content:center;align-items:center;padding:var(--space-2);background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);opacity:.6;transition:background-color .2s,color .2s,opacity .2s}.degree-mode-toggle.active{background-color:var(--c-warning);color:var(--c-text);opacity:1}.degree-mode-toggle:not(.active):hover{background-color:var(--c-border)}#pitch-paint-container{display:flex;flex-direction:column;gap:0rem;flex:1;width:fit-content}.paint-layout-grid{display:grid;grid-template-columns:auto auto auto;gap:0rem;align-items:stretch;grid-template-areas:"buttons meter settings";height:100%}.paint-main-controls{grid-area:buttons;display:flex;flex-direction:column;gap:0rem}.paint-buttons-row{display:flex;flex-direction:row;gap:.2rem}.paint-buttons-row>.toolkit-button{flex:1}.paint-controls-row{display:flex;gap:var(--space-3);justify-content:center;margin-top:var(--space-2)}.paint-control-group{display:flex;flex-direction:column;align-items:center;gap:var(--space-1)}.paint-control-group label{font-size:.9em;color:var(--c-text-muted);text-transform:uppercase;letter-spacing:.5px;font-weight:500}#mic-paint-toggle{background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border)}#mic-paint-toggle.active{background-color:var(--c-danger);color:var(--c-surface);border-color:var(--c-danger);font-weight:700}#paint-clear-btn{background-color:var(--c-surface);color:var(--c-text);border:1px solid var(--c-border)}#paint-clear-btn:disabled{opacity:.6;cursor:not-allowed;background-color:var(--c-gridline)}#paint-clear-btn:not(:disabled):hover{background-color:var(--c-warning);border-color:var(--c-warning);color:var(--c-text)}#trail-thickness,#trail-opacity{width:45px;height:24px;background:transparent;border:none;border-radius:0;box-shadow:none;position:relative;padding:0}#trail-thickness svg,#trail-opacity svg{width:45px!important;height:24px!important}#trail-thickness circle,#trail-opacity circle{fill:var(--c-surface)!important;stroke:var(--c-border)!important;stroke-width:2!important}#trail-thickness path,#trail-opacity path{stroke:var(--c-accent)!important;fill:none!important;stroke-width:3!important}.slider-value{position:absolute;top:-8px;right:-8px;background-color:var(--c-accent);color:var(--c-surface);border-radius:50%;width:18px;height:18px;display:flex;align-items:center;justify-content:center;font-size:.65em;font-weight:700;pointer-events:none}.paint-color-toggle-container,.paint-playback-toggle-container{display:flex;flex-direction:column;align-items:center;gap:var(--space-1);margin-top:var(--space-2)}.paint-color-toggle-container h5,.paint-playback-toggle-container h5{margin:0;color:var(--c-text-muted);font-size:.9em;text-transform:uppercase;letter-spacing:.5px;font-weight:600}.two-state-toggle{position:relative;width:120px;height:30px;background-color:var(--c-gridline);border:2px solid var(--c-border);border-radius:15px;cursor:pointer;-webkit-user-select:none;user-select:none;transition:all .3s ease}.two-state-slider{position:absolute;top:2px;left:2px;width:56px;height:26px;background-color:var(--c-accent);border-radius:13px;transition:transform .3s ease;box-shadow:0 2px 4px #0003}.two-state-toggle.active .two-state-slider{transform:translate(60px)}.toggle-labels{display:flex;justify-content:space-between;align-items:center;height:100%;padding:0 var(--space-2);pointer-events:none}.toggle-label{font-size:.7em;font-weight:600;color:var(--c-text-muted);transition:color .3s ease;z-index:1}.two-state-toggle:not(.active) .toggle-label:first-child,.two-state-toggle.active .toggle-label:last-child{color:var(--c-surface)}#pitch-paint-canvas{position:absolute;top:0;left:0;pointer-events:none;z-index:2}.mic-error{color:var(--c-danger);font-size:var(--font-size-sm);text-align:center;padding:var(--space-2);background-color:#dc35451a;border:1px solid var(--c-danger);border-radius:var(--border-radius-sm);margin-top:var(--space-2)}.mic-permission-prompt{text-align:center;padding:var(--space-3);color:var(--c-text-muted);font-size:var(--font-size-sm);background-color:var(--c-gridline);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);margin-top:var(--space-2)}.mic-permission-prompt button{margin-top:var(--space-2);background-color:var(--c-accent);color:var(--c-surface);border:none;padding:var(--space-2) var(--space-3);border-radius:var(--border-radius-sm);cursor:pointer;font-size:var(--font-size-sm)}.mic-permission-prompt button:hover{background-color:var(--c-accent-hover)}@media (prefers-reduced-motion: reduce){.meter-bar{transition:none}}@media (prefers-reduced-motion: reduce){*{transition:none!important;animation:none!important}}.mic-meter-container-inline{display:flex;flex-direction:column;gap:var(--space-1);margin-top:var(--space-2);padding:var(--space-2);background-color:var(--c-gridline);border-radius:var(--border-radius-md);border:1px solid var(--c-border)}.mic-meter-header-inline{display:flex;justify-content:space-between;align-items:center}.meter-label{font-size:var(--font-size-sm);color:var(--c-text);font-weight:600}.meter-settings-btn-small{padding:var(--space-1);font-size:var(--font-size-xs);min-width:auto;width:24px;height:24px;display:flex;align-items:center;justify-content:center}.mic-meter-wrapper-inline{position:relative;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);overflow:hidden;height:36px}.mic-meter-container{margin-top:var(--space-4);border-top:1px solid var(--c-border);padding-top:var(--space-3)}.mic-meter-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-2)}.mic-meter-header h5{margin:0;font-size:var(--font-size-sm);color:var(--c-text);font-weight:600}.meter-controls{display:flex;gap:var(--space-1)}.meter-settings-btn{padding:var(--space-1);font-size:var(--font-size-sm);min-width:auto;width:28px;height:28px;display:flex;align-items:center;justify-content:center}.mic-meter-wrapper,.mic-meter-wrapper-inline{position:relative;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);overflow:hidden}.mic-meter-wrapper.compact{height:48px}.mic-meter-wrapper.wide{height:72px}.mic-meter-wrapper-inline{height:36px}.mic-meter-container-vertical{grid-area:meter;display:flex;flex-direction:column;gap:var(--space-2);padding:0 var(--space-2);border-left:1px solid var(--c-border-light);border-right:1px solid var(--c-border-light);width:3.5rem;height:100%}.mic-meter-header-vertical{display:flex;align-items:center;justify-content:space-between;font-size:var(--font-size-sm);color:var(--c-text);font-weight:600}.mic-meter-wrapper-vertical{flex:1;position:relative;background-color:var(--c-surface);border:1px solid var(--c-border);border-radius:var(--border-radius-md);overflow:hidden;min-height:100px}.meter-placeholder{display:flex;align-items:center;justify-content:center;height:100%;background-color:var(--c-gridline);opacity:.6}.meter-placeholder.disabled{opacity:.4}.meter-status-text{font-size:var(--font-size-xs);color:var(--c-text-muted);text-align:center;padding:var(--space-1)}.mic-meter-wrapper-inline .meter-status-text{font-size:10px;padding:var(--space-1)}.mic-meter-wrapper.active .meter-placeholder,.mic-meter-wrapper-inline.active .meter-placeholder{display:none}.mic-meter-wrapper canvas,.mic-meter-wrapper-inline canvas{display:block;width:100%;height:100%;background-color:var(--c-surface)}.meter-settings-panel{margin-top:var(--space-2);padding:var(--space-3);background-color:var(--c-gridline);border-radius:var(--border-radius-md);border:1px solid var(--c-border)}.meter-settings-panel.hidden{display:none}.meter-setting-group{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-2)}.meter-setting-group:last-child{margin-bottom:0;gap:var(--space-2)}.meter-setting-group label{font-size:var(--font-size-sm);color:var(--c-text);font-weight:500;min-width:80px}.meter-control{padding:var(--space-1) var(--space-2);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);background-color:var(--c-surface);color:var(--c-text);font-size:var(--font-size-sm)}.meter-control:focus{outline:2px solid var(--c-warning);outline-offset:2px}.meter-error{background-color:#f8d7da;border-color:var(--c-danger)}.meter-error .meter-status-text{color:var(--c-danger)}.meter-permission-prompt{padding:var(--space-3);text-align:center;background-color:#fff3cd;border:1px solid var(--c-warning);border-radius:var(--border-radius-md);margin-top:var(--space-2)}.meter-permission-prompt p{margin:0 0 var(--space-2) 0;font-size:var(--font-size-sm);color:var(--c-text)}.meter-permission-prompt button{background-color:var(--c-warning);color:var(--c-text);border:none;padding:var(--space-2) var(--space-3);border-radius:var(--border-radius-sm);font-size:var(--font-size-sm);cursor:pointer}.meter-permission-prompt button:hover{background-color:#e0a800}.adsr-container{flex-direction:column;justify-content:flex-start;overflow:visible}.adsr-main-panel{display:flex;flex-direction:row;width:100%;flex-grow:1;min-height:0;overflow:visible}.adsr-graph-wrapper{flex-grow:1;position:relative;border:1px solid var(--c-border);border-radius:var(--border-radius-sm);overflow:visible}#adsr-envelope{width:100%;height:100%;overflow:visible}#adsr-envelope svg{display:block;width:100%;height:100%;background-color:var(--c-surface)}.sustain-slider-wrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-inline:0rem;width:20px}#sustain-slider-track{position:relative;width:var(--space-2);height:100%;background-color:var(--c-gridline);border-radius:var(--border-radius-sm)}#sustain-slider-track:before{content:"";position:absolute;bottom:0;left:0;width:100%;height:var(--sustain-progress, 0%);background-color:var(--c-accent);border-radius:var(--border-radius-sm)}#sustain-slider-track:after{content:"";position:absolute;top:0;left:0;width:100%;height:var(--ineligible-height, 0%);background-color:#80808066;border-radius:var(--border-radius-sm);pointer-events:none}#sustain-slider-thumb{position:absolute;left:50%;transform:translate(-50%,50%);width:20px;height:20px;background-color:var(--c-accent);border-radius:50%;border:2px solid var(--c-surface);box-shadow:var(--box-shadow-sm);cursor:grab;color:var(--c-surface);font-size:12px;font-weight:700;display:flex;justify-content:center;align-items:center;-webkit-user-select:none;user-select:none}#sustain-slider-thumb:active{cursor:grabbing;background-color:var(--c-accent-hover);transform:translate(-50%,50%) scale(1.1)}#multi-thumb-slider-container{position:relative;width:calc(100% - 30px);height:var(--space-2);border-radius:var(--border-radius-sm);margin-block-start:.2rem;align-self:flex-start;background:linear-gradient(to right,var(--c-accent) var(--adr-progress, 0%),var(--c-gridline) var(--adr-progress, 0%))}.time-slider-thumb{position:absolute;top:50%;transform:translate(-50%,-50%);width:20px;height:20px;background-color:var(--c-accent);border-radius:50%;border:2px solid var(--c-surface);box-shadow:var(--box-shadow-sm);cursor:grab;color:var(--c-surface);font-size:12px;font-weight:700;display:flex;justify-content:center;align-items:center;-webkit-user-select:none;user-select:none}.time-slider-thumb:active{cursor:grabbing;background-color:var(--c-accent-hover);transform:translate(-50%,-50%) scale(1.1)}.harmonic-bins-container{flex-direction:column;justify-content:flex-start;flex-grow:1}.blend-slider-container{display:flex;align-items:center;width:100%;margin-bottom:.2rem;flex-shrink:0;padding-left:1px;padding-right:calc(30px + var(--space-2))}#filter-enable-toggle{flex-shrink:0;background-color:var(--c-gridline);color:var(--c-text-muted);border:1px solid var(--c-border);display:none}#filter-enable-toggle .filter-icon{width:24px;height:24px}#filter-enable-toggle.active{background-color:var(--c-accent);color:var(--c-surface);border-color:var(--c-accent-hover)}.filter-main-panel{display:flex;flex-direction:row;width:100%;flex-grow:1;gap:0rem;min-height:0}.filter-button-wrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;padding-inline:var(--space-1);width:40px;transition:opacity .2s}#blend-slider-container,#cutoff-slider-container{position:relative;height:10px;border-radius:var(--border-radius-sm);flex-grow:1;background:linear-gradient(to right,var(--c-accent) var(--progress, 0%),var(--c-gridline) var(--progress, 0%))}#cutoff-slider-container{width:calc(100% - 1px - 30px - var(--space-2));align-self:flex-start;transition:opacity .2s;flex-shrink:0;max-height:10px;margin-left:1px;margin-right:calc(var(--space-2))}.filter-cutoff-thumb,.filter-blend-thumb{position:absolute;top:50%;transform:translate(-50%,-50%);width:20px;height:20px;font-size:12px;background-color:var(--c-accent);border-radius:50%;border:2px solid var(--c-surface);box-shadow:var(--box-shadow-sm);cursor:grab;color:var(--c-surface);font-weight:700;display:flex;justify-content:center;align-items:center;-webkit-user-select:none;user-select:none;z-index:5}.filter-cutoff-thumb:active,.filter-blend-thumb:active{cursor:grabbing;background-color:var(--c-accent-hover);transform:translate(-50%,-50%) scale(1.1)}.vertical-blend-wrapper{display:flex;flex-direction:column;align-items:center;justify-content:center;width:30px}#vertical-blend-track{position:relative;width:var(--space-2);height:100%;min-height:80px;background:linear-gradient(to top,var(--c-accent) var(--blend-progress, 0%),var(--c-gridline) var(--blend-progress, 0%));border-radius:var(--border-radius-sm);cursor:pointer}#vertical-blend-thumb{position:absolute;left:50%;transform:translate(-50%,50%);width:20px;height:20px;background-color:var(--c-accent);border-radius:50%;border:2px solid var(--c-surface);box-shadow:var(--box-shadow-sm);cursor:ns-resize;color:var(--c-surface);font-size:12px;font-weight:700;display:flex;justify-content:center;align-items:center;-webkit-user-select:none;user-select:none;z-index:5}#vertical-blend-thumb:active{cursor:ns-resize;background-color:var(--c-accent-hover);transform:translate(-50%,50%) scale(1.1)}.harmonic-bins-grid{display:flex;flex-direction:row;flex-grow:1;min-height:100px;position:relative;gap:0;padding:0;border:1px solid var(--c-border);border-radius:2px;overflow:hidden}.slider-column{display:flex;flex-direction:column;flex:1;align-items:center;min-width:0}.harmonic-label{font-size:.7rem;color:var(--c-text-muted);text-align:center;height:16px;display:flex;align-items:center;justify-content:center}.harmonic-label-internal{position:absolute;bottom:2px;left:50%;transform:translate(-50%);font-size:.8rem;font-weight:600;text-align:center;z-index:3;pointer-events:none;transition:color .1s ease,text-shadow .1s ease;-webkit-user-select:none;user-select:none}.slider-track{flex-grow:1;width:100%;background-color:#fff;border:none;border-radius:0;position:relative;cursor:pointer;margin:0;min-height:60px;display:flex;flex-direction:column;justify-content:flex-end}.slider-snap-zone{position:absolute;bottom:0;left:0;right:0;height:10%;background-color:#f7f7f7;border-top:1px solid var(--c-border)}.slider-fill{position:absolute;bottom:0;left:0;right:0;background-color:transparent;transition:height .1s ease;border-radius:0 0 1px 1px}.phase-button{background-color:var(--c-gridline);color:var(--c-text-muted);border:1px solid var(--c-border);border-radius:3px;margin-top:0rem;padding:.01rem;cursor:pointer;display:flex;align-items:center;justify-content:center;width:20px;height:20px;flex-shrink:0}.phase-button:hover{background-color:var(--c-border);color:var(--c-text)}.phase-button svg{width:100%;height:100%}.filter-overlay-canvas{position:absolute;top:0;left:0;width:100%;height:calc(100% - 28px);pointer-events:none;z-index:2}.multislider-container.filter-disabled #blend-slider-container,.multislider-container.filter-disabled #cutoff-slider-container{opacity:.5;pointer-events:none}.multislider-container.filter-disabled .filter-overlay-canvas{display:none}.static-waveform-container{margin-bottom:.52em}.static-waveform-container h4{margin:0;font-size:.875rem;font-weight:600;color:var(--c-text, #212529)}.waveform-display-wrapper{position:relative;width:100%;max-width:280px;height:100%;border:1px solid var(--c-border, #dee2e6);border-radius:6px;background:var(--c-surface, #ffffff);overflow:hidden;box-shadow:inset 0 1px 3px #0000001a;transition:all .2s ease;transform:translateZ(0)}.waveform-display-wrapper.live-mode{border-color:var(--c-accent, #4A90E2);box-shadow:inset 0 1px 3px #0000001a,0 0 0 2px #4a90e21a}#static-waveform-canvas{display:block;width:100%;height:100%;cursor:default}.waveform-display-wrapper:after{content:"";position:absolute;top:6px;right:6px;width:8px;height:8px;border-radius:50%;background:#28a745;opacity:0;transition:opacity .3s ease;z-index:10}.waveform-display-wrapper.live-mode:after{opacity:1}.timbre-panel .static-waveform-container{margin:0}@keyframes waveform-pulse{0%,to{box-shadow:inset 0 1px 3px #0000001a,0 0 0 2px #4a90e21a}50%{box-shadow:inset 0 1px 3px #0000001a,0 0 0 2px #4a90e233}}.waveform-display-wrapper.live-mode.pulsing{animation:waveform-pulse 2s ease-in-out infinite}@media (max-width: 768px){.waveform-display-wrapper{height:80px}.static-waveform-container h4{font-size:.8rem}}@media (prefers-color-scheme: dark){.waveform-display-wrapper{background:var(--c-surface-dark, #2d3748);border-color:var(--c-border-dark, #4a5568)}.static-waveform-container h4{color:var(--c-text-dark, #e2e8f0)}.waveform-display-wrapper.live-mode{border-color:var(--c-accent, #4A90E2);box-shadow:inset 0 1px 3px #0003,0 0 0 2px #4a90e226}}.static-waveform-container .control-section{padding:0}#timbre-panel .static-waveform-container{border-top:1px solid var(--c-border-light, #f1f3f4);border-bottom:1px solid var(--c-border-light, #f1f3f4);padding-top:0rem;padding-bottom:0;margin-top:.2rem;margin-bottom:.2rem}.waveform-display-wrapper:not(.live-mode){background-image:linear-gradient(90deg,rgba(0,0,0,.02) 1px,transparent 1px),linear-gradient(rgba(0,0,0,.02) 1px,transparent 1px);background-size:20px 10px;background-position:0 0,0 0}.waveform-display-wrapper *{transition:opacity .2s ease}#static-waveform-canvas.loading{opacity:.5;background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:loading-shimmer 1.5s infinite}@keyframes loading-shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}@media (prefers-contrast: high){.waveform-display-wrapper{border-width:2px;border-color:#000}.waveform-display-wrapper.live-mode{border-color:#06c;box-shadow:0 0 0 3px #0066cc4d}}.waveform-speed-controls{position:absolute;top:8px;right:8px;display:flex;gap:4px;z-index:20}.waveform-speed-btn{padding:var(--space-1);font-size:13px;font-weight:500;background-color:#fff;color:var(--c-text);border:1px solid var(--c-border);border-radius:var(--border-radius-sm);cursor:pointer;transition:all .2s ease;min-width:28px;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.waveform-speed-btn:hover{background-color:var(--c-border)}.waveform-speed-btn.active{background-color:var(--c-accent-light, #63a9fd)!important;color:var(--c-text, #212529)!important;border-color:var(--c-accent, #4A90E2)!important;font-weight:600!important;box-shadow:0 0 0 1px var(--c-accent, #4A90E2)!important;transform:scale(.98)!important}.waveform-speed-btn.active:hover{background-color:var(--c-accent-light, #63a9fd)!important;color:var(--c-text, #212529)!important;border-color:var(--c-accent, #4A90E2)!important}.waveform-speed-controls{opacity:1;pointer-events:auto}@media (prefers-color-scheme: dark){.waveform-speed-btn{background-color:var(--c-surface-dark, #2d3748);border-color:var(--c-border-dark, #4a5568);color:var(--c-text-dark, #e2e8f0)}.waveform-speed-btn:hover{background-color:var(--c-border-dark, #4a5568)}}@media (prefers-reduced-motion: reduce){.waveform-display-wrapper,.waveform-display-wrapper:after,.waveform-display-wrapper *,.waveform-speed-btn{transition:none;animation:none}}.note.selected{background-color:var(--note-color, #000)}.note-pair.selected{border-color:var(--note-color)!important;box-shadow:0 0 8px var(--note-color)}.note-pair[data-color="#4a90e2"].selected{--note-color: #4a90e2}.note-pair[data-color="#2d2d2d"].selected{--note-color: #2d2d2d}.note-pair[data-color="#d66573"].selected{--note-color: #d66573}.note-pair[data-color="#68a03f"].selected{--note-color: #68a03f}.toolkit-icon-button.selected,.toolkit-icon-button.active:not(#grid-zoom-in):not(#grid-zoom-out):not(#clear-button):not(#undo-button):not(#redo-button):not(#stop-button):not(#play-button){background-color:var(--c-accent);color:var(--c-surface)}.toolkit-icon-button.selected img,.toolkit-icon-button.active:not(#grid-zoom-in):not(#grid-zoom-out):not(#clear-button):not(#undo-button):not(#redo-button):not(#stop-button):not(#play-button) img{filter:invert(1) brightness(2)}.eraser-button.selected{background-color:var(--c-danger);color:var(--c-surface);box-shadow:none}.eraser-button.selected img{filter:invert(1) brightness(2)}.toolkit-icon-button.selected:hover,.toolkit-icon-button.active:hover{background-color:var(--c-accent-hover);transform:scale(1)}.eraser-button.selected:hover{background-color:#a72836}.eraser-button.erasing-active{background-color:var(--c-danger);color:var(--c-surface);transform:scale(1)}.eraser-button.erasing-active img{filter:invert(1) brightness(2)}.toolkit-icon-button.flash{background-color:#dc35454d;box-shadow:0 0 8px var(--c-danger);animation:clearFlash .3s ease-out}@keyframes clearFlash{0%{background-color:#dc354599;box-shadow:0 0 12px var(--c-danger)}to{background-color:transparent;box-shadow:none}}.preset-button.selected{background-color:var(--c-accent);color:var(--c-surface);border:1px solid var(--c-accent-hover);box-shadow:0 0 5px var(--c-accent)}.preset-button.selected:hover{background-color:var(--c-accent-hover)}#volume-icon-button.active{background-color:var(--c-border)!important;color:var(--c-text)!important}#volume-icon-button.active img{filter:none!important}#volume-icon-button.active:hover{background-color:var(--c-gridline)!important;color:var(--c-text)!important}#clear-button:active,#eraser-tool-button:active{background-color:#dc35454d!important;transform:scale(.92);transition-duration:.05s}#loop-button.active{background-color:var(--c-warning)!important;color:var(--c-text)!important}#loop-button.active img{filter:none!important}#loop-button.active:hover{background-color:#e6ac00!important;color:var(--c-text)!important}
